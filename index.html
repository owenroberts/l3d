<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>~ 3d longies ~</title>
	<link rel="stylesheet" href="./css/style.css">
</head>

<body>
	<div id="container">
		<div id="log"></div>
		<div id="inner">
			<div id="longies"></div>
			
			<div id="splash">
				<noscript>
					<div class="nojava">
						This site requires JavaScript.
					</div>
				</noscript>
				<div id="inner-splash">
					<p id="title"> loading </p>
				</div>
			</div>
		</div>
		<div id="controls">
			<button id="start">start</button>
			<button id="fullscreen">fullscreen</button>
		</div>
	</div>

	<script type="x-shader/x-vertex" id="vertexshader">

			varying vec2 vUv;

			void main() {

				vUv = uv;

				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

			}

		</script>

		<script type="x-shader/x-fragment" id="fragmentshader">

			uniform sampler2D baseTexture;
			uniform sampler2D bloomTexture;

			varying vec2 vUv;

			float blendOverlay(float base, float blend) {
				return base<0.5?(2.0*base*blend):(1.0-2.0*(1.0-base)*(1.0-blend));
			}

			vec3 blendOverlay(vec3 base, vec3 blend) {
				return vec3(blendOverlay(base.r,blend.r),blendOverlay(base.g,blend.g),blendOverlay(base.b,blend.b));
			}

			vec3 blendOverlay(vec3 base, vec3 blend, float opacity) {
				return (blendOverlay(base, blend) * opacity + base * (1.0 - opacity));
			}


			void main() {
				vec4 a = texture2D( baseTexture, vUv );
				vec4 b = texture2D( bloomTexture, vUv );
				vec4 r = vec4(1.0, 0.0, 0.0, 1.0);
				vec3 color =  blendOverlay(a.rgb, b.rgb);
				gl_FragColor = vec4(color, 1.0);

				
			}

		</script>

	<script src="scene.js" type="module"></script>
</body>
</html>